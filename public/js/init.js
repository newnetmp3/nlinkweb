(() => {
  // ns-hugo:/home/scott/.cache/hugo_cache/modules/filecache/modules/pkg/mod/github.com/hbstack/header/modules/theme-toggle@v0.5.2/assets/hb/modules/header-theme-toggle/init/index.ts
  (() => {
    "use strict";
    const THEME_AUTO = "auto";
    const THEME_DARK = "dark";
    const THEME_LIGHT = "light";
    const THEME_KEY = "hb-theme";
    const getPreferredTheme = () => {
      return window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? THEME_DARK : THEME_LIGHT;
    };
    const getTheme = () => {
      const v = localStorage.getItem(THEME_KEY);
      return v ? v : THEME_AUTO;
    };
    const setTheme = (theme2, save = false) => {
      save && localStorage.setItem(THEME_KEY, theme2);
      const value = theme2 === THEME_AUTO ? getPreferredTheme() : theme2;
      document.documentElement.setAttribute("data-bs-theme", value);
      onSet(value);
    };
    const onSet = (theme2) => {
      const event = new CustomEvent("hb:theme", { detail: { theme: theme2 } });
      document.dispatchEvent(event);
    };
    const activeTheme = (theme2) => {
      let name = "";
      document.querySelectorAll("[data-bs-theme-value]").forEach((toggle) => {
        if (toggle.getAttribute("data-bs-theme-value") === theme2) {
          toggle.classList.add("active");
          name = toggle.getAttribute("data-bs-theme-name") ?? "";
        } else {
          toggle.classList.remove("active");
        }
      });
      const newIcon = document.body.querySelector(`[data-bs-theme-value="${theme2}"] svg`)?.cloneNode(true);
      const oldIcon = document.body.querySelector(".btn-theme-toggle svg");
      oldIcon?.replaceWith(newIcon);
      const nameEle = document.querySelector(".theme-toggle .theme-name");
      nameEle.innerHTML = name;
    };
    const theme = getTheme();
    setTheme(theme);
    window.addEventListener("DOMContentLoaded", () => {
      activeTheme(theme);
      window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", (e) => {
        if (getTheme() !== THEME_AUTO) {
          return;
        }
        setTheme(e.matches ? THEME_DARK : THEME_LIGHT);
      });
      const activeToggle = (toggle) => {
        const v = toggle.getAttribute("data-bs-theme-value");
        const theme2 = v ? v : THEME_AUTO;
        setTheme(theme2, true);
        activeTheme(theme2);
      };
      const toggles = document.querySelectorAll("[data-bs-theme-value]");
      toggles.forEach((toggle) => {
        toggle.addEventListener("click", () => {
          activeToggle(toggle);
        });
      });
      const btnToggle = document.querySelector(".btn-theme-toggle");
      if (btnToggle !== null && btnToggle.getAttribute("data-style") === "switch") {
        btnToggle.addEventListener("click", () => {
          let next = 0;
          toggles.forEach((toggle, i) => {
            if (toggle.classList.contains("active")) {
              next = i + 1;
              return;
            }
          });
          if (next >= toggles.length) {
            next = 0;
          }
          activeToggle(toggles[next]);
        });
      }
    });
  })();
})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibnMtaHVnbzovaG9tZS9zY290dC8uY2FjaGUvaHVnb19jYWNoZS9tb2R1bGVzL2ZpbGVjYWNoZS9tb2R1bGVzL3BrZy9tb2QvZ2l0aHViLmNvbS9oYnN0YWNrL2hlYWRlci9tb2R1bGVzL3RoZW1lLXRvZ2dsZUB2MC41LjIvYXNzZXRzL2hiL21vZHVsZXMvaGVhZGVyLXRoZW1lLXRvZ2dsZS9pbml0L2luZGV4LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIoKCkgPT4ge1xuICAgICd1c2Ugc3RyaWN0J1xuXG4gICAgY29uc3QgVEhFTUVfQVVUTyA9ICdhdXRvJ1xuICAgIGNvbnN0IFRIRU1FX0RBUksgPSAnZGFyaydcbiAgICBjb25zdCBUSEVNRV9MSUdIVCA9ICdsaWdodCdcblxuICAgIGNvbnN0IFRIRU1FX0tFWSA9ICdoYi10aGVtZSdcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3lzdGVtJ3MgcHJlZmVycmVkIHRoZW1lLlxuICAgICAqIFxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICovXG4gICAgY29uc3QgZ2V0UHJlZmVycmVkVGhlbWUgPSAoKTogc3RyaW5nID0+IHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhICYmIHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJykubWF0Y2hlcyA/IFRIRU1FX0RBUksgOiBUSEVNRV9MSUdIVFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjdXJyZW50IHRoZW1lLlxuICAgICAqIFxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICovXG4gICAgY29uc3QgZ2V0VGhlbWUgPSAoKTogc3RyaW5nID0+IHtcbiAgICAgICAgY29uc3QgdiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFRIRU1FX0tFWSlcbiAgICAgICAgcmV0dXJuIHYgPyB2IDogVEhFTUVfQVVUT1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdGhlbWUgd2l0aCB0aGUgZ2l2ZW4gdGhlbWUuXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRoZW1lXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzYXZlIHdoZXRoZXIgdG8gc2F2ZSBpdCB0byBsb2NhbFN0b3JhZ2UuXG4gICAgICovXG4gICAgY29uc3Qgc2V0VGhlbWUgPSAodGhlbWU6IHN0cmluZywgc2F2ZSA9IGZhbHNlKSA9PiB7XG4gICAgICAgIHNhdmUgJiYgbG9jYWxTdG9yYWdlLnNldEl0ZW0oVEhFTUVfS0VZLCB0aGVtZSlcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGVtZSA9PT0gVEhFTUVfQVVUTyA/IGdldFByZWZlcnJlZFRoZW1lKCkgOiB0aGVtZVxuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWJzLXRoZW1lJywgdmFsdWUpXG4gICAgICAgIG9uU2V0KHZhbHVlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVtaXRzIGEgY3VzdG9tIGV2ZW50IG9uIHRoZW1lIGNoYW5nZS5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGhlbWUgXG4gICAgICovXG4gICAgY29uc3Qgb25TZXQgPSAodGhlbWUpID0+IHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2hiOnRoZW1lJywgeyBkZXRhaWw6IHsgdGhlbWU6IHRoZW1lIH0gfSk7XG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFjdGl2ZSBjdXJyZW50IHRoZW1lJ3MgaWNvbi5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGhlbWUgXG4gICAgICovXG4gICAgY29uc3QgYWN0aXZlVGhlbWUgPSAodGhlbWU6IHN0cmluZykgPT4ge1xuICAgICAgICBsZXQgbmFtZSA9ICcnXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWJzLXRoZW1lLXZhbHVlXScpLmZvckVhY2goKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtdGhlbWUtdmFsdWUnKSA9PT0gdGhlbWUpIHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgICAgICAgICBuYW1lID0gdG9nZ2xlLmdldEF0dHJpYnV0ZSgnZGF0YS1icy10aGVtZS1uYW1lJykgPz8gJydcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gc3luYyB0aGVtZSBpY29uLlxuICAgICAgICBjb25zdCBuZXdJY29uID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKGBbZGF0YS1icy10aGVtZS12YWx1ZT1cIiR7dGhlbWV9XCJdIHN2Z2ApPy5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnRcbiAgICAgICAgY29uc3Qgb2xkSWNvbiA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignLmJ0bi10aGVtZS10b2dnbGUgc3ZnJylcbiAgICAgICAgb2xkSWNvbj8ucmVwbGFjZVdpdGgobmV3SWNvbilcbiAgICAgICAgLy8gc3luYyB0aGVtZSBuYW1lLlxuICAgICAgICBjb25zdCBuYW1lRWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRoZW1lLXRvZ2dsZSAudGhlbWUtbmFtZScpIGFzIEhUTUxFbGVtZW50XG4gICAgICAgIG5hbWVFbGUuaW5uZXJIVE1MID0gbmFtZVxuICAgIH1cblxuICAgIGNvbnN0IHRoZW1lID0gZ2V0VGhlbWUoKVxuICAgIC8vIFNldCB0aGUgZGF0YSBhdHRyaWJ1dGUgQVNBUCwgaW4gb3JkZXIgdG8gYXZvaWQgZmxpY2tlcmluZy5cbiAgICBzZXRUaGVtZSh0aGVtZSlcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgICAgICAvLyBBY3RpdmUgdGhlIHRoZW1lJ3MgaWNvbiBvbiBwYWdlIGxvYWQuXG4gICAgICAgIGFjdGl2ZVRoZW1lKHRoZW1lKVxuXG4gICAgICAgIHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChnZXRUaGVtZSgpICE9PSBUSEVNRV9BVVRPKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERPIE5PVCBzYXZlIHRoZSB0aGVtZS5cbiAgICAgICAgICAgIHNldFRoZW1lKGUubWF0Y2hlcyA/IFRIRU1FX0RBUksgOiBUSEVNRV9MSUdIVClcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBhY3RpdmVUb2dnbGUgPSAodG9nZ2xlOiBFbGVtZW50KTogdm9pZCA9PiB7XG4gICAgICAgICAgICBjb25zdCB2ID0gdG9nZ2xlLmdldEF0dHJpYnV0ZSgnZGF0YS1icy10aGVtZS12YWx1ZScpXG4gICAgICAgICAgICBjb25zdCB0aGVtZSA9IHYgPyB2IDogVEhFTUVfQVVUT1xuICAgICAgICAgICAgc2V0VGhlbWUodGhlbWUsIHRydWUpXG4gICAgICAgICAgICBhY3RpdmVUaGVtZSh0aGVtZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRvZ2dsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1icy10aGVtZS12YWx1ZV0nKVxuICAgICAgICB0b2dnbGVzLmZvckVhY2godG9nZ2xlID0+IHtcbiAgICAgICAgICAgIHRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBhY3RpdmVUb2dnbGUodG9nZ2xlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBidG5Ub2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLXRoZW1lLXRvZ2dsZScpXG4gICAgICAgIGlmIChidG5Ub2dnbGUgIT09IG51bGwgJiYgYnRuVG9nZ2xlLmdldEF0dHJpYnV0ZSgnZGF0YS1zdHlsZScpID09PSAnc3dpdGNoJykge1xuICAgICAgICAgICAgYnRuVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gMFxuICAgICAgICAgICAgICAgIHRvZ2dsZXMuZm9yRWFjaCgodG9nZ2xlLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2dnbGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IGkrMVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGlmIChuZXh0ID49IHRvZ2dsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFjdGl2ZVRvZ2dsZSh0b2dnbGVzW25leHRdKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pXG59KSgpXG4iXSwKICAibWFwcGluZ3MiOiAiOztBQUFBLEdBQUMsTUFBTTtBQUNIO0FBRUEsVUFBTSxhQUFhO0FBQ25CLFVBQU0sYUFBYTtBQUNuQixVQUFNLGNBQWM7QUFFcEIsVUFBTSxZQUFZO0FBT2xCLFVBQU0sb0JBQW9CLE1BQWM7QUFDcEMsYUFBTyxPQUFPLGNBQWMsT0FBTyxXQUFXLDhCQUE4QixFQUFFLFVBQVUsYUFBYTtBQUFBLElBQ3pHO0FBT0EsVUFBTSxXQUFXLE1BQWM7QUFDM0IsWUFBTSxJ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
